<template>
    <div class="c-Footer">
        <c-Audio class="c-Audio" v-if="song.name"></c-Audio>
        <!-- 改进，不晓得监听当前路由 -->
        <footer id="animationFooter" v-show="this.isShowFooter">
            <div @click="toRoute('home', $event)" ref="home">
                <svg t="1653928043786" class="icon" viewBox="0 0 1042 1024" version="1.1" ref="color" p-id="2991"
                    width="24" height="24" v-on:click.self.prevent>
                    <path
                        d="M360.296296 94.814815c-11.377778 0-18.962963 7.585185-18.962963 18.962963s7.585185 18.962963 18.962963 18.962963 18.962963-7.585185 18.962963-18.962963-7.585185-18.962963-18.962963-18.962963z m-37.925926 417.185185c-104.296296 0-322.37037 56.888889-322.37037 151.703704s216.177778 151.703704 322.37037 151.703703 170.666667-37.925926 170.666667-151.703703-60.681481-151.703704-170.666667-151.703704z m-18.962963 265.481481c-91.022222 0-267.377778-41.718519-267.377777-113.777777s176.355556-113.777778 267.377777-113.777778c121.362963 0 151.703704 37.925926 151.703704 113.777778s-32.237037 113.777778-151.703704 113.777777z m379.25926-246.518518c-113.777778 0-151.703704 60.681481-151.703704 170.666667 0 104.296296 56.888889 322.37037 151.703704 322.37037s151.703704-216.177778 151.703703-322.37037-37.925926-170.666667-151.703703-170.666667z m0 457.007407c-72.059259 0-113.777778-176.355556-113.777778-267.377777 0-121.362963 37.925926-151.703704 113.777778-151.703704s113.777778 32.237037 113.777777 151.703704c0 91.022222-41.718519 267.377778-113.777777 267.377777zM360.296296 0c-94.814815 0-151.703704 216.177778-151.703703 322.37037s37.925926 170.666667 151.703703 170.666667 151.703704-60.681481 151.703704-170.666667c0-104.296296-56.888889-322.37037-151.703704-322.37037z m0 455.111111c-75.851852 0-113.777778-32.237037-113.777777-151.703704 0-91.022222 41.718519-267.377778 113.777777-267.377777s113.777778 176.355556 113.777778 267.377777c0 121.362963-37.925926 151.703704-113.777778 151.703704z m568.888889-113.777778c-11.377778 0-18.962963 7.585185-18.962963 18.962963s7.585185 18.962963 18.962963 18.962963 18.962963-7.585185 18.962963-18.962963-7.585185-18.962963-18.962963-18.962963z m-208.592592-132.74074c-106.192593 0-170.666667 37.925926-170.666667 151.703703s60.681481 151.703704 170.666667 151.703704c104.296296 0 322.37037-56.888889 322.37037-151.703704s-216.177778-151.703704-322.37037-151.703703z m18.962963 265.481481c-121.362963 0-151.703704-37.925926-151.703704-113.777778s32.237037-113.777778 151.703704-113.777777c91.022222 0 267.377778 41.718519 267.377777 113.777777 0 73.955556-176.355556 113.777778-267.377777 113.777778z m-56.888889 417.185185c-11.377778 0-18.962963 7.585185-18.962963 18.962963s7.585185 18.962963 18.962963 18.962963 18.962963-7.585185 18.962963-18.962963-7.585185-18.962963-18.962963-18.962963zM113.777778 644.740741c-11.377778 0-18.962963 7.585185-18.962963 18.962963s7.585185 18.962963 18.962963 18.962963 18.962963-7.585185 18.962963-18.962963-7.585185-18.962963-18.962963-18.962963z"
                        fill="#B5B5B5" p-id="2992" v-on:click.self.prevent></path>
                </svg>
                <p v-on:click.self.prevent>发现</p>
            </div>
            <div>
                <svg t="1653929206141" class="icon" viewBox="0 0 1024 1024" version="1.1" ref="color" p-id="5984"
                    width="24" height="24">
                    <path
                        d="M512 1014.153846c277.336615 0 502.153846-224.817231 502.153846-502.153846S789.336615 9.846154 512 9.846154 9.846154 234.663385 9.846154 512s224.817231 502.153846 502.153846 502.153846z m0-39.384615C256.423385 974.769231 49.230769 767.576615 49.230769 512S256.423385 49.230769 512 49.230769s462.769231 207.192615 462.769231 462.769231-207.192615 462.769231-462.769231 462.769231z"
                        p-id="5985" fill="#ffffff" v-on:click.self.prevent></path>
                    <path
                        d="M465.900308 743.808C480.984615 746.791385 496.403692 748.307692 512 748.307692c130.510769 0 236.307692-105.796923 236.307692-236.307692S642.510769 275.692308 512 275.692308 275.692308 381.489231 275.692308 512c0 15.596308 1.516308 31.015385 4.499692 46.099692a19.692308 19.692308 0 1 0 38.636308-7.650461A197.976615 197.976615 0 0 1 315.076923 512c0-108.760615 88.162462-196.923077 196.923077-196.923077s196.923077 88.162462 196.923077 196.923077-88.162462 196.923077-196.923077 196.923077c-13.026462 0-25.895385-1.260308-38.449231-3.741539a19.692308 19.692308 0 1 0-7.650461 38.626462z"
                        p-id="5986" fill="#ffffff" v-on:click.self.prevent></path>
                    <path
                        d="M512 512m-78.769231 0a78.769231 78.769231 0 1 0 157.538462 0 78.769231 78.769231 0 1 0-157.538462 0Z"
                        p-id="5987" fill="#ffffff" v-on:click.self.prevent></path>
                    <path
                        d="M512.196923 502.882462C400.128 546.973538 324.923077 655.389538 324.923077 777.846154a19.692308 19.692308 0 1 0 39.384615 0c0-106.141538 65.181538-200.103385 162.304-238.316308a19.692308 19.692308 0 1 0-14.424615-36.647384z"
                        p-id="5988" fill="#ffffff" v-on:click.self.prevent></path>
                </svg>
                <p v-on:click.self.prevent>博客</p>
            </div>
            <div @click.stop="toRoute('user', $event)" ref="user">
                <svg t="1653929420650" class="icon" viewBox="0 0 1024 1024" version="1.1" ref="color" p-id="9780"
                    width="24" height="24" v-on:click.self.prevent>
                    <path
                        d="M760.6272 193.7664a98.816 98.816 0 0 1 34.4832 69.888l0.1792 5.8624-0.0256 29.2096-62.8992 9.7536v-38.9632c0-8.2176-2.56-15.9744-7.168-22.144l-2.4832-2.9696-2.816-2.6624a29.696 29.696 0 0 0-20.992-7.296l-3.2512 0.384-289.1776 47.9488c-14.6432 2.4576-25.6512 15.232-27.0592 31.232l-0.1536 3.456v117.6576l359.3472-57.472a32 32 0 0 1 2.048-0.256l54.6048-8.448v290.56l-0.1024 1.28c-0.0512 0.2304-0.128 0.2304-0.256-0.1792 0.9984 5.4784 1.4848 10.9056 1.4848 16.384 0 59.4944-55.8848 107.3664-124.0832 107.3664-68.1984 0-124.0832-47.872-124.0832-107.392s55.8848-107.392 124.0832-107.392c18.2272 0 35.8912 3.4304 51.9936 9.9072l6.8096 2.944 1.2544 0.64V442.368l-353.1008 56.4736v246.2464c0 59.52-55.9104 107.392-124.0832 107.392-68.1984 0-124.0832-47.872-124.0832-107.392s55.8848-107.392 124.0832-107.392c18.9952 0 37.376 3.712 54.016 10.7008l7.1168 3.2512V317.4656c0-44.8768 28.928-83.2256 70.1184-94.592l4.7872-1.2032 4.9152-0.9472L685.312 172.7488a92.8512 92.8512 0 0 1 75.3152 20.992zM255.1808 700.5952c-34.0992 0-61.1584 20.48-61.1584 44.4416 0 23.9872 27.0592 44.4672 61.1584 44.4672 34.0992 0 61.1328-20.48 61.1328-44.4672 0-23.9616-27.0336-44.4416-61.1328-44.4416z m417.0752-68.096c-34.0736 0-61.1328 20.5056-61.1328 44.4672s27.0592 44.4672 61.1328 44.4672c34.1504 0 61.184-20.48 61.1584-44.4672 0-23.9616-27.0592-44.4416-61.1584-44.4416z"
                        p-id="9781" fill="#B5B5B5" v-on:click.self.prevent></path>
                </svg>
                <p v-on:click.self.prevent>我的</p>
            </div>
            <div>
                <svg t="1653929275956" class="icon" viewBox="0 0 1024 1024" version="1.1" ref="color" p-id="6887"
                    width="24" height="24" v-on:click.self.prevent>
                    <path
                        d="M882.607 620.29c-32.233-46.502-75.779-81.467-126.4-101.612 22.324-15.705 41.105-36.646 54.68-61.068 15.712-28.268 24.018-60.572 24.018-93.42 0-102.398-79.285-185.705-176.74-185.705-13.838 0-25.097 11.258-25.097 25.098 0 13.855 11.26 25.128 25.097 25.128 69.743 0 126.483 60.775 126.483 135.479 0 74.72-56.74 135.507-126.483 135.507-13.838 0-25.097 11.265-25.097 25.113v0.136c0 13.855 11.26 25.128 25.097 25.128 125.464 0 227.537 108.816 227.537 242.569 0 13.873 11.285 25.159 25.158 25.159 13.838 0 25.097-11.286 25.097-25.16 0.001-62.398-18.448-121.998-53.35-172.353z"
                        fill="#B5B5B5" p-id="6888" v-on:click.self.prevent></path>
                    <path
                        d="M623.157 577.674c-26.348-18.662-55-33.4-85.316-43.896 64.02-38.906 103.316-108.15 103.316-183.412 0-118.333-96.263-214.605-214.588-214.605-118.359 0-214.65 96.272-214.65 214.605 0 40.29 11.283 79.585 32.63 113.642a215.99 215.99 0 0 0 71.568 70.318c-30.826 10.524-59.95 25.425-86.697 44.37a343.098 343.098 0 0 0-76.195 74.126c-44.566 59.376-68.122 130.018-68.122 204.29 0 13.838 11.258 25.098 25.097 25.098 13.856 0 25.129-11.26 25.129-25.098 0-77.456 30.203-150.434 85.044-205.489 54.71-54.925 127.125-85.207 203.921-85.283a24.91 24.91 0 0 0 7.632-0.516l1.991-0.446c74.72 1.513 144.954 31.659 198.33 85.262 54.815 55.05 85.003 128.013 85.003 205.448 0 13.838 11.273 25.097 25.128 25.097 13.839 0 25.098-11.26 25.098-25.097 0-74.272-23.556-144.914-68.121-204.29a343.214 343.214 0 0 0-76.198-74.124zM426.57 186.002c90.629 0 164.362 73.734 164.362 164.364 0 90.638-73.733 164.379-164.362 164.379-90.648 0-164.393-73.741-164.393-164.38-0.001-90.63 73.745-164.363 164.393-164.363z"
                        fill="#B5B5B5" p-id="6889" v-on:click.self.prevent></path>
                </svg>
                <p v-on:click.self.prevent>发现</p>
            </div>
            <div>
                <svg t="1653929361217" class="icon" viewBox="0 0 1024 1024" version="1.1" ref="color" p-id="8715"
                    width="24" height="24" v-on:click.self.prevent>
                    <path
                        d="M507.904 391.168q-72.704 0-129.024-16.896t-86.016-33.28q-1.024-1.024-1.024-5.12l0-8.192q0-2.048 0.512-0.512t0.512 13.824l0 523.264-115.712 0 0-614.4q0-20.48 7.168-43.52t34.816-34.304q14.336-6.144 28.16-4.608t24.576 6.144 18.432 10.24 10.752 7.68q19.456 15.36 39.936 28.672t44.544 24.064 53.76 16.896 67.584 6.144l4.096 0 1.024 0 4.096 0q37.888 0 67.584-6.144t54.272-16.896 45.056-24.064 38.912-28.672q3.072-2.048 10.752-7.68t18.944-10.24 25.088-6.144 28.16 4.608q26.624 11.264 34.304 34.304t7.68 43.52l0 614.4-116.736 0 0-523.264q0-12.288 1.024-13.312 1.024 3.072 0.512 7.68t-1.536 5.632q-14.336 8.192-36.864 16.896t-50.688 16.384-60.928 12.288-66.56 4.608l-7.168 0z"
                        p-id="8716" fill="#B5B5B5" v-on:click.self.prevent></path>
                </svg>
                <p v-on:click.self.prevent>云村</p>
            </div>
        </footer>
    </div>


</template>

<script>
import cAudio from './cAudio.vue';
export default {
    name: 'c-Footer',
    props: {
        Showfooter: {
            type: Boolean,
            require: true
        }
    },
    data() {
        return {
            isShowFooter: true
        }
    },
    methods: {
        //初始化nav样式
        toRoute(route = this.$route.name) {
            if (this.$refs[route]) {
                let footer = this.$refs[route].parentNode
                for (let index = 0; index < footer.children.length; index++) {
                    footer.children[index].children[0].classList.remove('color')
                    footer.children[index].children[1].classList.remove('pcolor')
                }
                if (this.$route.name === route) {
                    this.$refs[route].children[0].classList.add('color')
                    this.$refs[route].children[1].classList.add('pcolor')
                    return
                }
                this.$refs[route].children[0].classList.add('color')
                this.$refs[route].children[1].classList.add('pcolor')
                this.$router.push({ name: route })
                footer = null;
            }




        }
    },
    mounted() {

        document.getElementById('animationFooter').classList.add('test')

        this.toRoute()
    },
    computed: {
        song() {
            return this.$store.state.songs.nowSong
        },
        nowRouter() {
            return this.$route.name
        },

    },
    watch: {
        'nowRouter': {
            handler(newRoute, oldRoute) {
                if (oldRoute !== newRoute) {
                    this.isShowFooter = this.$refs[newRoute] ? true : false

                }
            },
            deep: true,

        }
    },
    components: {
        cAudio,
    },

};
</script>

<style lang="less" scoped>
@runColor: rgba(239, 236, 236, 0);
@endColot: rgb(244, 40, 40);

.pcolor {
    color: @endColot;
}

.color {
    background-image: linear-gradient(45deg, @runColor , @endColot);
}

@keyframes example {
    from {
        top: 40px;
    }

    to {
        top: 0px;
    }
}

@keyframes example2 {
    from {
        top: 0px;
    }

    to {
        top: 40px;
    }
}

.test {
    animation-name: example;
    animation-duration: 0.5s;
    top: 0;
}

.test2 {
    animation-name: example2;
    animation-duration: 0.5s;
    top: 40px;
}

div.c-Footer {
    width: 100%;

    footer {
        width: 100%;
        display: flex;
        height: 100%;
        overflow: hidden;
        flex-direction: row;
        justify-content: space-around;
        align-items: center;
        position: relative;


        div {
            width: 40px;
            height: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-self: center;
            align-items: center;
            font-size: 0.25em;

            svg {
                width: 20px;
                height: 20px;
                padding: 1px;
                border-radius: 50%;
            }

            svg,
            path,
            p {
                font-size: 0.5rem;
                pointer-events: none;
            }



        }


    }
}
</style>